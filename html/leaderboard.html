{{ template "header" . }}
<main class="flexcell gridcontainer-leader">
  <div id="table" class="col-0" width="20%">
    <table>
      <tr>
        <th>Name</th>
        <th>Points</th>
      </tr>
      {{ range .AllUsers }}
      <tr>
      <td>{{ .DisplayName }}</td>
      <td>{{ .Points }}</td>
      </tr>
      {{ end }}
    </table>
  </div>
  <div class="col-1" width="80%" height="100%">
  <canvas id="graph"></canvas>
  </div>
    <script src="static/Chart.bundle.min.js" type="text/javascript"></script>
  <script>
    (function(){
      var c = document.getElementById("graph").getContext('2d');
      c.height = 800;

      var chart = new Chart(c, {
        type: 'horizontalBar',
        data: {
          labels: [{{ range .AllUsers }}{{ .DisplayName }},{{end}}],
          datasets: [ { label: "Points", data: [{{ range .AllUsers }}{{ .Points }},{{end}}]}]
        },
        options: {
          scales: {
            xAxes: [{
              ticks: {
                min: 0,
                stepSize: 1
              }
            }]
          },
          legend: {
              display: false,
          },
          mantainAspectRatio: false,
          responsive: true,
        },
    });
    })();
  </script>
</main>
{{ template "footer" . }}
